module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},41013,69376,e=>{"use strict";e.s(["ConsoleLogWriter",()=>r,"DefaultLogger",()=>a,"NoopLogger",()=>n],41013);var t=e.i(54892);class r{static [t.entityKind]="ConsoleLogWriter";write(e){console.log(e)}}class a{static [t.entityKind]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new r}logQuery(e,t){let r=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),a=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${a}`)}}class n{static [t.entityKind]="NoopLogger";logQuery(){}}e.s(["QueryPromise",()=>s],69376);class s{static [t.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}}},54850,16256,e=>{"use strict";e.s(["ColumnAliasProxyHandler",()=>i,"RelationTableAliasProxyHandler",()=>l,"TableAliasProxyHandler",()=>o,"aliasedRelation",()=>c,"aliasedTable",()=>u,"aliasedTableColumn",()=>d,"mapColumnsInAliasedSQLToAlias",()=>p,"mapColumnsInSQLToAlias",()=>g],54850);var t=e.i(29325),r=e.i(54892),a=e.i(63519),n=e.i(66634),s=e.i(90990);class i{constructor(e){this.table=e}static [r.entityKind]="ColumnAliasProxyHandler";get(e,t){return"table"===t?this.table:e[t]}}class o{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static [r.entityKind]="TableAliasProxyHandler";get(e,a){if(a===n.Table.Symbol.IsAlias)return!0;if(a===n.Table.Symbol.Name||this.replaceOriginalName&&a===n.Table.Symbol.OriginalName)return this.alias;if(a===s.ViewBaseConfig)return{...e[s.ViewBaseConfig],name:this.alias,isAlias:!0};if(a===n.Table.Symbol.Columns){let t=e[n.Table.Symbol.Columns];if(!t)return t;let r={};return Object.keys(t).map(a=>{r[a]=new Proxy(t[a],new i(new Proxy(e,this)))}),r}let o=e[a];return(0,r.is)(o,t.Column)?new Proxy(o,new i(new Proxy(e,this))):o}}class l{constructor(e){this.alias=e}static [r.entityKind]="RelationTableAliasProxyHandler";get(e,t){return"sourceTable"===t?u(e.sourceTable,this.alias):e[t]}}function u(e,t){return new Proxy(e,new o(t,!1))}function c(e,t){return new Proxy(e,new l(t))}function d(e,t){return new Proxy(e,new i(new Proxy(e.table,new o(t,!1))))}function p(e,t){return new a.SQL.Aliased(g(e.sql,t),e.fieldAlias)}function g(e,n){return a.sql.join(e.queryChunks.map(e=>(0,r.is)(e,t.Column)?d(e,n):(0,r.is)(e,a.SQL)?g(e,n):(0,r.is)(e,a.SQL.Aliased)?p(e,n):e))}e.s(["DrizzleError",()=>h,"DrizzleQueryError",()=>x,"TransactionRollbackError",()=>m],16256);class h extends Error{static [r.entityKind]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class x extends Error{constructor(e,t,r){super(`Failed query: ${e}
params: ${t}`),this.query=e,this.params=t,this.cause=r,Error.captureStackTrace(this,x),r&&(this.cause=r)}}class m extends h{static [r.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}},26822,1380,e=>{"use strict";e.s([],26822),e.i(52374),e.i(85348),e.i(99755),e.i(66685),e.s(["getAvailableCourseLanguages",()=>l,"getContentBlockTranslationsByIds",()=>c,"getCourseTranslation",()=>o,"getQuizQuestionTranslationsByIds",()=>d,"getSectionTranslation",()=>u],1380);var t=e.i(8079),r=e.i(89726);e.i(57354);var a=e.i(33299),n=e.i(44713),s=e.i(18963),i=e.i(62437);let o=async(e,n)=>(await r.db.select().from(a.courseTranslations).where((0,t.and)((0,t.eq)(a.courseTranslations.courseId,e),(0,t.eq)(a.courseTranslations.languageCode,n))).limit(1))[0]||null,l=async e=>(await r.db.select({languageCode:a.courseTranslations.languageCode}).from(a.courseTranslations).where((0,t.eq)(a.courseTranslations.courseId,e))).map(e=>e.languageCode),u=async(e,a)=>(await r.db.select().from(n.sectionTranslations).where((0,t.and)((0,t.eq)(n.sectionTranslations.sectionId,e),(0,t.eq)(n.sectionTranslations.languageCode,a))).limit(1))[0]||null,c=async(e,a)=>0===e.length?{}:(await r.db.select().from(s.contentBlockTranslations).where((0,t.eq)(s.contentBlockTranslations.languageCode,a))).reduce((e,t)=>(e[t.contentBlockId]=t,e),{}),d=async(e,a)=>0===e.length?{}:(await r.db.select().from(i.quizQuestionTranslations).where((0,t.eq)(i.quizQuestionTranslations.languageCode,a))).reduce((e,t)=>(e[t.quizQuestionId]=t,e),{})},42001,(e,t,r)=>{},38973,e=>{"use strict";e.s(["handler",()=>I,"patchFetch",()=>k,"routeModule",()=>A,"serverHooks",()=>S,"workAsyncStorage",()=>q,"workUnitAsyncStorage",()=>P],38973);var t=e.i(67009),r=e.i(54643),a=e.i(83497),n=e.i(88096),s=e.i(54029),i=e.i(5812),o=e.i(35976),l=e.i(33153),u=e.i(8418),c=e.i(8172),d=e.i(42249),p=e.i(7149),g=e.i(45412),h=e.i(19054),x=e.i(93695);e.i(29031);var m=e.i(53923);e.s(["GET",()=>b],3956);var y=e.i(76223);e.i(26822);var w=e.i(1380),f=e.i(85348),R=e.i(52374);e.i(57354);var v=e.i(77209),C=e.i(89726),T=e.i(8079);async function b(e,{params:t}){try{let{sectionId:r}=await t,{searchParams:a}=new URL(e.url),n=a.get("language");if(!n)return y.NextResponse.json({success:!1,error:"Language parameter is required"},{status:400});if(!await (0,R.getCourseSectionById)(r))return y.NextResponse.json({success:!1,error:"Section not found"},{status:404});let s=await (0,w.getSectionTranslation)(r,n),i=(await (0,f.getContentBlocksBySectionId)(r)).map(e=>e.id),o=await (0,w.getContentBlockTranslationsByIds)(i,n),l=(await C.db.select().from(v.quizQuestions).where((0,T.eq)(v.quizQuestions.sectionId,r))).map(e=>e.id),u=await (0,w.getQuizQuestionTranslationsByIds)(l,n);return y.NextResponse.json({success:!0,data:{sectionId:r,language:n,section:s||null,contentBlocks:o,quizQuestions:u}})}catch(e){return console.error("Error fetching section translations:",e),y.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}var E=e.i(3956);let A=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/translations/section/[sectionId]/route",pathname:"/api/translations/section/[sectionId]",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/apps/safety-lms/src/app/api/translations/section/[sectionId]/route.ts",nextConfigOutput:"",userland:E}),{workAsyncStorage:q,workUnitAsyncStorage:P,serverHooks:S}=A;function k(){return(0,a.patchFetch)({workAsyncStorage:q,workUnitAsyncStorage:P})}async function I(e,t,a){var y;let w="/api/translations/section/[sectionId]/route";w=w.replace(/\/index$/,"")||"/";let f=await A.prepare(e,t,{srcPage:w,multiZoneDraftMode:!1});if(!f)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:R,params:v,nextConfig:C,isDraftMode:T,prerenderManifest:b,routerServerContext:E,isOnDemandRevalidate:q,revalidateOnlyGenerated:P,resolvedPathname:S}=f,k=(0,i.normalizeAppPath)(w),I=!!(b.dynamicRoutes[k]||b.routes[S]);if(I&&!T){let e=!!b.routes[S],t=b.dynamicRoutes[k];if(t&&!1===t.fallback&&!e)throw new x.NoFallbackError}let N=null;!I||A.isDev||T||(N="/index"===(N=S)?"/":N);let j=!0===A.isDev||!I,O=I&&!j,H=e.method||"GET",Q=(0,s.getTracer)(),B=Q.getActiveScopeSpan(),_={params:v,prerenderManifest:b,renderOpts:{experimental:{cacheComponents:!!C.experimental.cacheComponents,authInterrupts:!!C.experimental.authInterrupts},supportsDynamicResponse:j,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:null==(y=C.experimental)?void 0:y.cacheLife,isRevalidate:O,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>A.onRequestError(e,t,a,E)},sharedContext:{buildId:R}},L=new o.NodeNextRequest(e),D=new o.NodeNextResponse(t),z=l.NextRequestAdapter.fromNodeNextRequest(L,(0,l.signalFromNodeResponse)(t));try{let i=async r=>A.handle(z,_).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=Q.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=a.get("next.route");if(n){let e=`${H} ${n}`;r.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),r.updateName(e)}else r.updateName(`${H} ${e.url}`)}),o=async s=>{var o,l;let u=async({previousCacheEntry:r})=>{try{if(!(0,n.getRequestMeta)(e,"minimalMode")&&q&&P&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await i(s);e.fetchMetrics=_.renderOpts.fetchMetrics;let l=_.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let u=_.renderOpts.collectedTags;if(!I)return await (0,d.sendResponse)(L,D,o,_.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=(0,p.toNodeOutgoingHttpHeaders)(o.headers);u&&(t[h.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==_.renderOpts.collectedRevalidate&&!(_.renderOpts.collectedRevalidate>=h.INFINITE_CACHE)&&_.renderOpts.collectedRevalidate,a=void 0===_.renderOpts.collectedExpire||_.renderOpts.collectedExpire>=h.INFINITE_CACHE?void 0:_.renderOpts.collectedExpire;return{value:{kind:m.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await A.onRequestError(e,t,{routerKind:"App Router",routePath:w,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isRevalidate:O,isOnDemandRevalidate:q})},E),t}},x=await A.handleResponse({req:e,nextConfig:C,cacheKey:N,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:q,revalidateOnlyGenerated:P,responseGenerator:u,waitUntil:a.waitUntil});if(!I)return null;if((null==x||null==(o=x.value)?void 0:o.kind)!==m.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==x||null==(l=x.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,n.getRequestMeta)(e,"minimalMode")||t.setHeader("x-nextjs-cache",q?"REVALIDATED":x.isMiss?"MISS":x.isStale?"STALE":"HIT"),T&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let y=(0,p.fromNodeOutgoingHttpHeaders)(x.value.headers);return(0,n.getRequestMeta)(e,"minimalMode")&&I||y.delete(h.NEXT_CACHE_TAGS_HEADER),!x.cacheControl||t.getHeader("Cache-Control")||y.get("Cache-Control")||y.set("Cache-Control",(0,g.getCacheControlHeader)(x.cacheControl)),await (0,d.sendResponse)(L,D,new Response(x.value.body,{headers:y,status:x.value.status||200})),null};B?await o(B):await Q.withPropagatedContext(e.headers,()=>Q.trace(u.BaseServerSpan.handleRequest,{spanName:`${H} ${e.url}`,kind:s.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},o))}catch(t){if(t instanceof x.NoFallbackError||await A.onRequestError(e,t,{routerKind:"App Router",routePath:k,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isRevalidate:O,isOnDemandRevalidate:q})}),I)throw t;return await (0,d.sendResponse)(L,D,new Response(null,{status:500})),null}}},38451,e=>{e.v(e=>Promise.resolve().then(()=>e(16520)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0983d2e9._.js.map