module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},41013,69376,e=>{"use strict";e.s(["ConsoleLogWriter",()=>r,"DefaultLogger",()=>a,"NoopLogger",()=>n],41013);var t=e.i(54892);class r{static [t.entityKind]="ConsoleLogWriter";write(e){console.log(e)}}class a{static [t.entityKind]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new r}logQuery(e,t){let r=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),a=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${a}`)}}class n{static [t.entityKind]="NoopLogger";logQuery(){}}e.s(["QueryPromise",()=>s],69376);class s{static [t.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}}},54850,16256,e=>{"use strict";e.s(["ColumnAliasProxyHandler",()=>i,"RelationTableAliasProxyHandler",()=>l,"TableAliasProxyHandler",()=>o,"aliasedRelation",()=>c,"aliasedTable",()=>u,"aliasedTableColumn",()=>d,"mapColumnsInAliasedSQLToAlias",()=>p,"mapColumnsInSQLToAlias",()=>h],54850);var t=e.i(29325),r=e.i(54892),a=e.i(63519),n=e.i(66634),s=e.i(90990);class i{constructor(e){this.table=e}static [r.entityKind]="ColumnAliasProxyHandler";get(e,t){return"table"===t?this.table:e[t]}}class o{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static [r.entityKind]="TableAliasProxyHandler";get(e,a){if(a===n.Table.Symbol.IsAlias)return!0;if(a===n.Table.Symbol.Name||this.replaceOriginalName&&a===n.Table.Symbol.OriginalName)return this.alias;if(a===s.ViewBaseConfig)return{...e[s.ViewBaseConfig],name:this.alias,isAlias:!0};if(a===n.Table.Symbol.Columns){let t=e[n.Table.Symbol.Columns];if(!t)return t;let r={};return Object.keys(t).map(a=>{r[a]=new Proxy(t[a],new i(new Proxy(e,this)))}),r}let o=e[a];return(0,r.is)(o,t.Column)?new Proxy(o,new i(new Proxy(e,this))):o}}class l{constructor(e){this.alias=e}static [r.entityKind]="RelationTableAliasProxyHandler";get(e,t){return"sourceTable"===t?u(e.sourceTable,this.alias):e[t]}}function u(e,t){return new Proxy(e,new o(t,!1))}function c(e,t){return new Proxy(e,new l(t))}function d(e,t){return new Proxy(e,new i(new Proxy(e.table,new o(t,!1))))}function p(e,t){return new a.SQL.Aliased(h(e.sql,t),e.fieldAlias)}function h(e,n){return a.sql.join(e.queryChunks.map(e=>(0,r.is)(e,t.Column)?d(e,n):(0,r.is)(e,a.SQL)?h(e,n):(0,r.is)(e,a.SQL.Aliased)?p(e,n):e))}e.s(["DrizzleError",()=>g,"DrizzleQueryError",()=>x,"TransactionRollbackError",()=>m],16256);class g extends Error{static [r.entityKind]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class x extends Error{constructor(e,t,r){super(`Failed query: ${e}
params: ${t}`),this.query=e,this.params=t,this.cause=r,Error.captureStackTrace(this,x),r&&(this.cause=r)}}class m extends g{static [r.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}},26822,1380,e=>{"use strict";e.s([],26822),e.i(52374),e.i(85348),e.i(99755),e.i(66685),e.s(["getAvailableCourseLanguages",()=>l,"getContentBlockTranslationsByIds",()=>c,"getCourseTranslation",()=>o,"getQuizQuestionTranslationsByIds",()=>d,"getSectionTranslation",()=>u],1380);var t=e.i(8079),r=e.i(89726);e.i(57354);var a=e.i(33299),n=e.i(44713),s=e.i(18963),i=e.i(62437);let o=async(e,n)=>(await r.db.select().from(a.courseTranslations).where((0,t.and)((0,t.eq)(a.courseTranslations.courseId,e),(0,t.eq)(a.courseTranslations.languageCode,n))).limit(1))[0]||null,l=async e=>(await r.db.select({languageCode:a.courseTranslations.languageCode}).from(a.courseTranslations).where((0,t.eq)(a.courseTranslations.courseId,e))).map(e=>e.languageCode),u=async(e,a)=>(await r.db.select().from(n.sectionTranslations).where((0,t.and)((0,t.eq)(n.sectionTranslations.sectionId,e),(0,t.eq)(n.sectionTranslations.languageCode,a))).limit(1))[0]||null,c=async(e,a)=>0===e.length?{}:(await r.db.select().from(s.contentBlockTranslations).where((0,t.eq)(s.contentBlockTranslations.languageCode,a))).reduce((e,t)=>(e[t.contentBlockId]=t,e),{}),d=async(e,a)=>0===e.length?{}:(await r.db.select().from(i.quizQuestionTranslations).where((0,t.eq)(i.quizQuestionTranslations.languageCode,a))).reduce((e,t)=>(e[t.quizQuestionId]=t,e),{})},62090,(e,t,r)=>{},21368,e=>{"use strict";e.s(["handler",()=>A,"patchFetch",()=>E,"routeModule",()=>v,"serverHooks",()=>b,"workAsyncStorage",()=>C,"workUnitAsyncStorage",()=>T],21368);var t=e.i(67009),r=e.i(54643),a=e.i(83497),n=e.i(88096),s=e.i(54029),i=e.i(5812),o=e.i(35976),l=e.i(33153),u=e.i(8418),c=e.i(8172),d=e.i(42249),p=e.i(7149),h=e.i(45412),g=e.i(19054),x=e.i(93695);e.i(29031);var m=e.i(53923);e.s(["GET",()=>f],9610);var y=e.i(76223);e.i(26822);var w=e.i(1380);async function f(e,{params:t}){try{let{courseId:r}=await t,{searchParams:a}=new URL(e.url),n=a.get("language");if(n){let e=await (0,w.getCourseTranslation)(r,n);if(!e)return y.NextResponse.json({success:!1,error:"Translation not found"},{status:404});return y.NextResponse.json({success:!0,data:e})}let s=await (0,w.getAvailableCourseLanguages)(r);return y.NextResponse.json({success:!0,data:{availableLanguages:s}})}catch(e){return console.error("Error fetching course translations:",e),y.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}var R=e.i(9610);let v=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/translations/[courseId]/route",pathname:"/api/translations/[courseId]",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/apps/safety-lms/src/app/api/translations/[courseId]/route.ts",nextConfigOutput:"",userland:R}),{workAsyncStorage:C,workUnitAsyncStorage:T,serverHooks:b}=v;function E(){return(0,a.patchFetch)({workAsyncStorage:C,workUnitAsyncStorage:T})}async function A(e,t,a){var y;let w="/api/translations/[courseId]/route";w=w.replace(/\/index$/,"")||"/";let f=await v.prepare(e,t,{srcPage:w,multiZoneDraftMode:!1});if(!f)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:R,params:C,nextConfig:T,isDraftMode:b,prerenderManifest:E,routerServerContext:A,isOnDemandRevalidate:P,revalidateOnlyGenerated:q,resolvedPathname:N}=f,S=(0,i.normalizeAppPath)(w),k=!!(E.dynamicRoutes[S]||E.routes[N]);if(k&&!b){let e=!!E.routes[N],t=E.dynamicRoutes[S];if(t&&!1===t.fallback&&!e)throw new x.NoFallbackError}let I=null;!k||v.isDev||b||(I="/index"===(I=N)?"/":I);let j=!0===v.isDev||!k,O=k&&!j,H=e.method||"GET",_=(0,s.getTracer)(),L=_.getActiveScopeSpan(),D={params:C,prerenderManifest:E,renderOpts:{experimental:{cacheComponents:!!T.experimental.cacheComponents,authInterrupts:!!T.experimental.authInterrupts},supportsDynamicResponse:j,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:null==(y=T.experimental)?void 0:y.cacheLife,isRevalidate:O,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>v.onRequestError(e,t,a,A)},sharedContext:{buildId:R}},K=new o.NodeNextRequest(e),Q=new o.NodeNextResponse(t),U=l.NextRequestAdapter.fromNodeNextRequest(K,(0,l.signalFromNodeResponse)(t));try{let i=async r=>v.handle(U,D).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=_.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=a.get("next.route");if(n){let e=`${H} ${n}`;r.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),r.updateName(e)}else r.updateName(`${H} ${e.url}`)}),o=async s=>{var o,l;let u=async({previousCacheEntry:r})=>{try{if(!(0,n.getRequestMeta)(e,"minimalMode")&&P&&q&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await i(s);e.fetchMetrics=D.renderOpts.fetchMetrics;let l=D.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let u=D.renderOpts.collectedTags;if(!k)return await (0,d.sendResponse)(K,Q,o,D.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=(0,p.toNodeOutgoingHttpHeaders)(o.headers);u&&(t[g.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==D.renderOpts.collectedRevalidate&&!(D.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&D.renderOpts.collectedRevalidate,a=void 0===D.renderOpts.collectedExpire||D.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:D.renderOpts.collectedExpire;return{value:{kind:m.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await v.onRequestError(e,t,{routerKind:"App Router",routePath:w,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isRevalidate:O,isOnDemandRevalidate:P})},A),t}},x=await v.handleResponse({req:e,nextConfig:T,cacheKey:I,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:E,isRoutePPREnabled:!1,isOnDemandRevalidate:P,revalidateOnlyGenerated:q,responseGenerator:u,waitUntil:a.waitUntil});if(!k)return null;if((null==x||null==(o=x.value)?void 0:o.kind)!==m.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==x||null==(l=x.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,n.getRequestMeta)(e,"minimalMode")||t.setHeader("x-nextjs-cache",P?"REVALIDATED":x.isMiss?"MISS":x.isStale?"STALE":"HIT"),b&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let y=(0,p.fromNodeOutgoingHttpHeaders)(x.value.headers);return(0,n.getRequestMeta)(e,"minimalMode")&&k||y.delete(g.NEXT_CACHE_TAGS_HEADER),!x.cacheControl||t.getHeader("Cache-Control")||y.get("Cache-Control")||y.set("Cache-Control",(0,h.getCacheControlHeader)(x.cacheControl)),await (0,d.sendResponse)(K,Q,new Response(x.value.body,{headers:y,status:x.value.status||200})),null};L?await o(L):await _.withPropagatedContext(e.headers,()=>_.trace(u.BaseServerSpan.handleRequest,{spanName:`${H} ${e.url}`,kind:s.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},o))}catch(t){if(t instanceof x.NoFallbackError||await v.onRequestError(e,t,{routerKind:"App Router",routePath:S,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isRevalidate:O,isOnDemandRevalidate:P})}),k)throw t;return await (0,d.sendResponse)(K,Q,new Response(null,{status:500})),null}}},38451,e=>{e.v(e=>Promise.resolve().then(()=>e(16520)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__567db5ca._.js.map